{"name":"Choroplethmaps.jl","tagline":"Easy thematic mapping using Gadfly and datasets such as US Census Bureau's TIGER data.","body":"# ChoroplethMaps\r\n\r\nEasy thematic mapping using Gadfly and datasets such as US Census Bureau's TIGER data.\r\n\r\n## Installing\r\n\r\nChoroplethMaps and some of its dependencies are not yet registered with METADATA, so:\r\n\r\n```julia\r\nPkg.clone(\"https://github.com/FugroRoames/Proj4.jl.git\")\r\nPkg.clone(\"https://github.com/penntaylor/DBaseReader.jl.git\")\r\nPkg.clone(\"https://github.com/penntaylor/ChoroplethMaps.jl.git\")\r\n```\r\n\r\n## Example use\r\n\r\n```julia\r\nusing ChoroplethMaps\r\nusing DataFrames\r\n\r\n# The data we want to map thematically\r\ndf = DataFrame(NAME=[\"Alabama\", \"Arkansas\", \"Louisiana\", \"Mississippi\", \"Tennessee\"],\r\nPCT=[26.6673430422, 15.6204437142, 32.4899197277, 37.5052896066, 17.0874767458] )\r\n\r\n# Using `choroplethmap` function and `Provider` for low-res State boundary TIGER\r\nchoroplethmap(mapify(df, Provider.STATESUMMARY(), key=:NAME),\r\n              group=:NAME, color=:PCT)\r\n```\r\n\r\nThe call to `choroplethmap` can be replaced with a direct call into Gadfly.plot if you prefer that:\r\n```julia\r\nusing Gadfly\r\nplot(mapify(df, Provider.STATESUMMARY(), key=:NAME),\r\n     x=:CM_X, y=:CM_Y, group=:NAME, color=:PCT,\r\n     Geom.polygon(preserve_order=true, fill=true),\r\n     Coord.cartesian(fixed=true))\r\n```\r\n\r\nBoth `choroplethmap` and `plot` produce the same image:\r\n\r\n<< Needs link to image >>\r\n\r\n## Maps are nice, but what's this package all about?\r\n\r\nChoroplethMaps provides three pieces for making choropleth, or thematic, maps:\r\n\r\n* `Provider`s that download and manage geographic shape data and make the data associated with a given source accessible as a `Dict` within Julia.\r\n* A `mapify` function that joins thematic data stored in a `DataFrame` with the polygons from a `Provider` in a way that allows Gadfly to plot a choropleth map.\r\n* A convenience function, `choroplethmap`, that sets up sensible defaults for Gadfly and removes some of the tedium of specifying a plot.\r\n\r\n## More details? Okay....\r\n\r\n### Provider(s)\r\n\r\nCurrently there is a single `Provider` for TIGER datasets from the US Census Bureau which can be used to automatically download and parse TIGER data from 2010 or later, including the smaller \"thematic\" boundary datasets from 2014.\r\n\r\n\r\n### Wait, I just looked at the ouput of `mapify`, and a bunch of columns from the Provider are missing....\r\n\r\nThat's by design. `mapify` strips the returned DataFrame down to the minimal set of columns needed to plot what you've asked it to \"mapify\". All columns that don't participate in the plot are just eating memory. Some of the TIGER datasets are huge, and there's little justification for leaving all that stuff sitting around. If you specifically want to keep extra columns, use the `keepcols` argument to `mapify`. See the next section for an example.\r\n\r\n\r\n### Using a column from the Provider as the thematic data\r\n\r\nIf you want to use a column from the original data as the color feature, you need to do two things: pass the name of the column in the `keepcols` argument of `mapify`, and then specify that column as the `color` argument to either `choroplethmap` or `Gadfly.plot`. Here we indicate we want to retain the :ALAND column in the DataFrame returned by `mapify`:\r\n\r\n```julia\r\nmapify(somedataframe, someprovider, key=:GEOID, keepcols=[:ALAND])\r\n```\r\n\r\n### Joining on one key and plotting on another\r\n\r\nWhen you want to group shapes based on a key other than the mapify join key (argument \"key\"), pass that key in as the plotgroup option to `mapify`. Here we `mapify` based on :STATEFP, but tell `mapify` to group the polygons based on the value of :GEOID:\r\n\r\n```julia\r\nmp = mapify(somedataframe, someprovider, key=:STATEFP, plotgroup=:GEOID, keepcols=[:ALAND])\r\n```\r\n\r\nA working example:\r\n\r\n```julia\r\nndf = DataFrame(STATEFP=[\"06\"])\r\nmp = mapify(ndf, Provider.COUNTYSUMMARY(), key=:STATEFP, plotgroup=:GEOID, keepcols=[:ALAND])\r\nchoroplethmap( mp, group=:GEOID, color=:ALAND)\r\n```\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}